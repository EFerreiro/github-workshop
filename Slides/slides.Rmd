---
title: "Introduction to GitHub"
author: | 
  Marcin Stepniak  
    
  ![](tGIS_large_black.png){width=3.5in}    
output:
  revealjs::revealjs_presentation:
    center: true
    transition: slide
    theme: night
    incremental: false
    reveal_options:
      slideNumber: true
    
---
# Programme of the workshop 

+ **Version Control Systems**, **Git** and **GitHub**

+ Application of git in **RStudio** IDE;

+ Application of git in **GitHub desktop**.

# What is Git?<br>What is GitHub? {data-background=#4B0082}

## Git

**Git** is a <span style="color:#CACCCD">distributed</span> <span style="color:#FFA07A">**version control system**</span>  

+ each client (user) has its own local copy  
<span style="color:#FFA07A"> => **local repository**</span>  
  
+ which can be synchronized with a copy stored on external server  
<span style="color:#FFA07A"> => **remote repository**</span>


```{r, echo=FALSE, warning=FALSE, message=FALSE, fig.height=4}
library(networkD3)
source(here::here("Slides", "R", "remote_graph.R"))
remote_graph()
```

## Git workflow

```{r, echo=FALSE, out.width = '120%'}
knitr::include_graphics(here::here("img", "graph_intro.png"))
```
<small>Source: *http://bit-booster.com/graph.html*</small>



## GitHub

<p align=left>**GitHub** is a commercial <span style="color:#FFA07A">Git repository hosting service</span>  
with some extra functionalities:</span>  

+ cloud-based service
+ web-based graphical interface
+ issue tracker 
+ basic project management functionalities, access granting etc.
+ Extended free plan:  
    
    + unlimited private repositories
    + unlimited collaborators 

## GitHub repo page

```{r, echo=FALSE, out.width = '120%'}
knitr::include_graphics(here::here("img", "github_main.png"))
```
<small>Source: *https://github.com/stmarcin/github-workshop*</small>





# Why do you (might) need it? {data-background=#4B0082}


## Why do you (might) need it?

```{r, echo=FALSE, out.width = '70%'}
knitr::include_graphics(here::here("img", "for_graph.svg"))
```

## Why do you need it for yourself?

```{r, echo=FALSE, out.width = '120%'}
knitr::include_graphics(here::here("img", "version_control_comics.jpg"))
```
<small>Source: *https://smutch.github.io/VersionControlTutorial/*</small>

## Why do you need it for yourself?

+ <span style="color:#FFA07A">track changes:</span> always have the most **recent version** of a file, while keeping the entire **history of changes**  
+ <span style="color:#FFA07A">experiment:</span> you can **experiment** with your code  
and **revert changes** if needed  
+ <span style="color:#FFA07A">multiple instances:</span> you can have several version of your code  
and easily switch between them  
+ in case of using a remote repository (e.g. GitHub):  
  
  
  + <span style="color:#FFA07A">backup</span> in a cloud (with all the above)  
  + <span style="color:#FFA07A">easy</span> access from multiple devices  
  + use <span style="color:#FFA07A">issues</span> to make notes to the future self

## Why do you need it for sharing?

+ searchable repositories  
+ created to share a code  
+ easy to attached a web-based description of your code (`README.md`) file  
e.g. https://github.com/r-spatial/leafgl
+ easy to install directly from github  
(e.g. `remotes::install_github("r-lib/remotes")` )

## Why do you need it for collaboration?

+ **Git** is distributed: all collaborators work on their own local copy  
(code, its versions and all the **history** of changes)  
+ All collaborators can work simultaneously
+ Grant access even to private repositories  
+ Share (and test!) a developer version of your code  
+ pull request: revise changes before merging them  
+ contributions are transparent  
+ issues:  
    + search for help, ask questions and discuss, request new features / modifications  
    + easy to link to commits, cross-connect to other issues, bug tracker  
    + assignees, mentions and notifications  


# Basic vocabulary: repository {data-background=#4B0082}

## Repo

<div style="text-align:left"> 

<span style="color:#FFA07A">Repo</span>sitory is like a main *folder* of your project.  
It may contain any type of files, (sub)folders etc.  

Golden rule: <span style="color:#FFA07A">**one project one repo**</span>sitory.

+ <span style="color:#FFA07A">Local repository</span> is located on the user's computer.  
+ <span style="color:#FFA07A">Remote repository</span> is located on remote server. 

<br> 

<span style="color:#FFA07A">`README`</span> file: not required but highly recommended.  
Describes the repo, may contain documentation, use-cases or  
any other information you think may be useful for a potential user (including yourself!)

</div> 

# Create new repo  {data-background=#4B0082}

<style type="text/css">
.clearer {clear: both}
.column-left1{
  float: left;
  width: 48%;
  text-align: centre;
}
.column-centre1{
  float: centre;
  width: 4%;
  text-align: centre;
}
.column-right1{
  float: right;
  width: 48%;
  text-align: centre;
}
</style>

## Create remote repository on GitHub

<br>  

Go to your GitHub account and select <span style="color:#FFA07A">**New repository**</span>  

<br>  

```{r github sign up 1, echo=FALSE, out.width = '35%'}
knitr::include_graphics(here::here("img", "new_repo_01.png"))
```

## Create new repository on GitHub

```{r github brand new repo, echo=FALSE, out.width = '70%'}
knitr::include_graphics(here::here("img", "new_repo_00.png"))
```

## Name your repository

+ Should be a character string (without space)

+ No *official* naming convention, but hyphens are mostly used to separate words
</span>

<div class="column-left1">
```{r, echo=FALSE}
knitr::include_graphics(here::here("img", "new_repo_02_name.png"))
```
</div>

<div class="column-right1">
```{r, echo=FALSE}
knitr::include_graphics(here::here("img", "new_repo_03_name.png"))
```
</div><div class="clearer"></div> 


+ <span style="color:#FFA07A; background-color:rgba(255,244,204,.1)">**`Great repository names are short and memorable.`**</span>

<br>  

Besides repository name you can:

+ add a brief <span style="color:#FFA07A">description</span>  (read: **you should**)

+ create <span style="color:#FFA07A">`README.md`</span> file (yes, you **want** to do that)

```{r, echo=FALSE}
knitr::include_graphics(here::here("img", "new_repo_08_readme.png"))
```

## Make decision: public or private?

<br> 

+ **public** repository is, well, public (anyone can see it, clone it etc.)

```{r, echo=FALSE, out.width = '50%'}
knitr::include_graphics(here::here("img", "new_repo_09_public.png"))
```

+ **private** repository is visible only for you or anyone you grant access to it. It is a good solution:      

  + testing, experiments, etc.
  + for early-stage projects (for some reason you don't want to share it yet)  
  + for all *in-progress* stuff  
  + for any project should not be publicly visible  
  
## Public to private or private to public?<br>Not a problem! (usually)  
  
<br>

+ you can change it anytime:

```{r, echo=FALSE, out.width = '50%'}
knitr::include_graphics(here::here("img", "new_repo_10_settings.png"))
```

```{r, echo=FALSE, out.width = '50%'}
knitr::include_graphics(here::here("img", "new_repo_11_danger_zone.png"))
```

## Add **.gitignore**

<span style="color:#FFA07A">**.gitignore**</span> contains a list of all files that **should not** be included in the repo.

It's highly recommended to inlcude <span style="color:#FFA07A">**.gitignore**</span> into your repository.  

GitHub offers a list of `.gitignore` templates.  
Select the one which fits you the best.

```{r, echo=FALSE, out.width = '35%'}
knitr::include_graphics(here::here("img", "new_repo_04_gitignore.png"))
```


## Select a licence

<br>

```{r, echo=FALSE, out.width = '20%'}
knitr::include_graphics(here::here("img", "new_repo_05_licence.png"))
```

## New repo on github: summary

```{r, echo=FALSE, out.width = '80%'}
knitr::include_graphics(here::here("img", "new_repo_06.png"))
```

## The look of a brand new repository

```{r, echo=FALSE, out.width = '80%'}
knitr::include_graphics(here::here("img", "new_repo_07.png"))
```

# Now it is your turn!<br><br>Create your first repository  {data-background=#008080}

+ create new, **public** repository on github
+ inlcude `README` and `.gitignore` (`R`)



# Basic vocabulary: clone repo {data-background=#4B0082}

## Clone repo

<br>  

<span style="color:#FFA07A">Clone</span> creates a local *copy* of a remote repository

It contains all project's files and full project's history. 

# Git workflow: clone repo {data-background=#4B0082}

## Clone new repo

1. You need to download (<span style="color:#FFA07A">clone</span>) repo from github

```{r, echo=FALSE, out.width = '80%'}
knitr::include_graphics(here::here("img", "clone_repo_01.png"))
```

## Clone new repo (RStudio)

2. Create new RStudio project...

```{r, echo=FALSE}
knitr::include_graphics(here::here("img", "clone_repo_02.png"))
```


3. ...using Version Control  

<div class="clearer"></div>
<div class="column-left1">
```{r, echo=FALSE}
knitr::include_graphics(here::here("img", "clone_repo_03.png"))
```
</div>
<div class="column-right1">
```{r, echo=FALSE}
knitr::include_graphics(here::here("img", "clone_repo_04.png"))
```
</div><div class="clearer"></div>


## Clone new repo (RStudio)

4. Paste link to the repo and select its location

```{r, echo=FALSE}
knitr::include_graphics(here::here("img", "clone_repo_05.png"))
```

## Clone new repo (RStudio)

Done!

```{r, echo=FALSE}
knitr::include_graphics(here::here("img", "clone_repo_06.png"))
```


# Now it is your turn!<br><br>Clone your repo  {data-background=#008080}

# Ignoring files <span style="color:#FFA07A">(**.gitignore**)</span> {data-background=#4B0082}

## What does <span style="color:#FFA07A">(**.gitignore**)</span> do?   

Use **.gitignore** for all those files that should not be taken into account by Git so they are:

+ excluded from version control and not tracked by Git 

+ not inlcuded to any commit

+ not *pushed* to remote repository

+ not shared with colaborators / published

## Types of <span style="color:#FFA07A">**.gitignore**</span>

<div style="text-align:left"> 

<br>

+ <span style="background-color:rgba(255,244,204,.1)">**repository**</span>  <span style="color:#FFA07A">.gitignore</span>  
  
  + Located in the root folder of the repository
  + Created together with repository by GitHub

<br>

+ **local**  <span style="color:#FFA07A">.gitignore</span>  

  + Located in a given folder
  + refer to files of a given folder

<br>

+ **global** <span style="color:#FFA07A">.gitignore</span> for every Git repository on your computer  

</div>

## What to add to  **.gitignore**?

Anything we don't want or don't need to keep track of 

+ user-specific files / settings (e.g. <span style="color:#FFA07A">`MyProjectName.Rproj`)  
+ notes & drafts 
+ data, in particular large files
+ outputs of our code: tables, figures, html rendered from Rmarkdown files, etc.


+ <span style="color:#FFA07A; background-color:rgba(255,244,204,.1)">Any personal / confidential data</span>:  
  + passwords  
  + API keys  

## How to understand <span style="color:#FFA07A">**.gitignore**</span>?

+ Anything after <span style="color:#FFA07A">`#`</span> is ignored

+ <span style="color:#FFA07A">`*.Rmd`</span> ingore all `.Rmd` files (`*` replace any character(s)

+ <span style="color:#FFA07A">`!main.Rmd`</span> state that `main.Rmd` should be tracked (not ingored)

+ <span style="color:#FFA07A">`test.R`</span> ignore test.R file

+ <span style="color:#FFA07A">`/test.R`</span> ignore `test.R` file in a folder where `.gitignore` is located

+ <span style="color:#FFA07A">`test/test.R`</span> ignore `test.R` file in a `test` folder

+ <span style="color:#FFA07A">`test/`</span> ignore all files in a `test` folder

**Tip:** use templates, manually add what you need.


# Now it is your turn!<br><br>Modify your `.gitignore` file {data-background=#008080}

<br>

<div style="text-align:left"> 

+ add a comment `my files` and include:  

  + all files of the `.Rproj` type  
  + all files in the (future) `temporary` folder  

+ revise list of files in your git pane

</div>

# Basic vocabulary:<br> commit, push and pull {data-background=#4B0082}

## Commit

<span style="color:#FFA07A">Commit</span> is a `snapshot` of the repository.

```{r, echo=FALSE, out.width = '80%'}
knitr::include_graphics(here::here("img", "github_commit_01.png"))
```

*Commits are cheap*.  
Commit often. 

## Commits 

<p align = left>Each commit has its own identifier.</p>  

```{r, echo=FALSE, out.width = '80%'}
knitr::include_graphics(here::here("img", "github_commit_03.png"))
```

<p align = left>You can:  
+ have an access to the repository at a given stage  
+ revise changes made by a particular commit</p>  

## Revision of changes

```{r, echo=FALSE, out.width = '80%'}
knitr::include_graphics(here::here("img", "github_commit_02.png"))
```

## Revision of chages

You can even compare binary files!  
*Use `Display the rich diff`*

```{r, echo=FALSE, out.width = '80%'}
knitr::include_graphics(here::here("img", "github_commit_04.png"))
```

## Commit messages

Each commit must contain a message.  
Add **useful**, **self-explanatory** messages.  


```{r, echo=FALSE, out.width = '60%'}
knitr::include_graphics("https://imgs.xkcd.com/comics/git_commit.png")
```

<small>Source: *https://imgs.xkcd.com/comics/git_commit.png*</small>

## Push and pull changes

It's all about syncing your local and remote repositories.

<br> 
<div style="text-align:left"> 
<span style="color:#FFA07A">Push</span> chagnes: send recent commit(s) from your local repository to the remote one.  

<span style="color:#FFA07A">Pull</span> repository: download recent commits from remote repository and update your local repository  

<br> 

**Tip 1**: Pull before push (sooner or later, this habit  helps to keep your mental health).

**Tip 2**: Push often. Commit even more often.  
Every time you push, you are making a cloud backup of your project.  
Extra point: you get more *pit stops* you can refer to. 
</div>


# Git workflow: commits {data-background=#4B0082}

## Git pane in RStudio

```{r, echo=FALSE, out.width = '80%'}
knitr::include_graphics(here::here("img", "git_rstudio_pane_06.png"))
```

1. <span style="color:#FFA07A">Pull</span> - update local repo using remote one 
1. <span style="color:#FFA07A">Push</span> - send changes from your local repo to the remote one
1. Options  
    + <span style="color:#FFA07A">Revert</span> changes - discard changes made since the last `commit`
    + Ignore - add a file (or files) to <span style="color:#FFA07A">`.gitignore`</span>
    + <span style="color:#FFA07A">Open Shell</span>
1. <span style="color:#FFA07A">Commit</span> selected files
1. Revise changes offered by the laste commit
1. Revise <span style="color:#FFA07A">history</span> of a project (all commits)

## File states

1. <span style="color:#9BBB59">Committed</span>: form part of the repo in the current form.  
Git keeps their most recent state and full history of changes  

1. <span style="color:#FD1B1A">Untracked</span>: git *sees* them but has no clue what's your point, yet

1. <span style="color:#FCD5B5">Staged</span>: their current form is *frozen* and can be added to  *commit*.  
In case of further changes, you need unstage and stage it again.  

1. <span style="color:#FFA07A">Ignored</span>: git *doesn't see* nor it's interested whether they are changed or not.  
You need to explicitly *inform* git to ignore a file

```{r, echo=FALSE, out.width = '80%'}
knitr::include_graphics(here::here("img", "workflow_01.png"))
```

## File states in RStudio

+ <img src="https://github.com/stmarcin/github-workshop/raw/master/img/git_rstudio_pane_03a.png" style="vertical-align:middle" style="border: 0;">  <span style="color:#FCD5B5">Added</span>: new file added to repository.

+ <img src="https://github.com/stmarcin/github-workshop/raw/master/img/git_rstudio_pane_03b.png" style="vertical-align:middle" style="border: 0;">  <span style="color:#FCD5B5">Untracked</span> file.

+ <img src="https://github.com/stmarcin/github-workshop/raw/master/img/git_rstudio_pane_03c.png" style="vertical-align:middle" style="border: 0;">  <span style="color:#FCD5B5">Deleted</span> file: it is not available in repository anymore  
**important:** the file can be found when browsing commits / history of repository.

+ <img src="https://github.com/stmarcin/github-workshop/raw/master/img/git_rstudio_pane_03d.png" style="vertical-align:middle" style="border: 0;">  <span style="color:#FCD5B5">Modified</span>: file has been changed since the last commit

## Stage file in RStudy Git pane

<div style="text-align:left"> 
Select which changes (modify / add / delete) should be added to the commit
(i.e. which changes will be *saved* together with the commit)
</div>

```{r, echo=FALSE, out.width = '80%'}
knitr::include_graphics(here::here("img", "git_rstudio_pane_08.png"))
```

<div style="text-align:left"> 
Unselected changes will be available only in the particular evnironment, but they cannot be `pushed` to the remote repository.  
The file(s) or their recent changes are not *untracked*.
</div>

## Commit in RStudio Git pane

<div style="text-align:left"> 

Once you want to commit changes, you are taken to the new window.  
You can revise changes file by file and decide which of them you want to add to the commit.

</div>

```{r, echo=FALSE, out.width = '80%'}
knitr::include_graphics(here::here("img", "github_commit_07.png"))
```

## Add a commit message

<br>

<div style="text-align:left"> 

Finally, you **have to** add a commit message. Otherwise you get the following error:  


```
Aborting commit due to empty commit message.
```

</div>


## Push commit to remote repository

Once you finalize your commit, you can <span style="color:#FFA07A">push</span> your commit(s) to the remote repository. 


```{r, echo=FALSE, out.width = '60%'}
knitr::include_graphics(here::here("img", "github_commit_09.png"))
```

After a while, commit becames alive in your github repository (you need to refresh your browser).



## Changes in staged file

<div style="text-align:left"> 
If you stage a file and then you make some extra changes, they will **not** be added to the commit.  
</div>

```{r, echo=FALSE, out.width = '60%'}
knitr::include_graphics(here::here("img", "github_commit_08.png"))
```

<div style="text-align:left"> 
In order to include them in the current commit, you need to  
unstage the file and stage it again.
</div>

## Workflow: remote & local

<br>

```{r, echo=FALSE, out.width = '80%'}
knitr::include_graphics(here::here("img", "workflow_02.svg"))
```

## Workflow: remote & two different locals

```{r, echo=FALSE, out.width = '70%'}
knitr::include_graphics(here::here("img", "workflow_03.png"))
```

# Now it is your turn!<br><br>Make your first commit {data-background=#008080}

<br>

<div style="text-align:left"> 

+ Copy `example_code.R` file to your project folder.  
+ Create `temporary` folder  
+ Copy `exercice_description.R` to the `temporary` folder  
+ Revise your Git pane in RStudio  


</div>

## Now it is your turn!<br>Make your first commit {data-background=#008080}

```{r, echo=FALSE, out.width = '70%'}
knitr::include_graphics(here::here("img", "github_commit_05.png"))
```

+ Stage file `example_code.R` file  
+ Select <span style="color:#FFA07A">Commit</span> button

## Now it is your turn!<br>Make your first commit {data-background=#008080}

```{r, echo=FALSE, out.width = '70%'}
knitr::include_graphics(here::here("img", "github_commit_06.png"))
```

+ Add commit message  
+ Commit and push changes to the remote repository  
+ inspect repository on your github account

# Now it is your turn!<br>Commit modified file {data-background=#008080}

+ Open `example_code.R` file in RStudio  
+ Open `exercice_description.R` file in RStudio  
+ Copy lines 25-26 from `exercice_description.R`.
+ Replace line 17 in `example_code.R` by copied lines
```
my_first_plot <- ggplot(data = mpg) +
    geom_point(mapping = aes(x = displ, y = hwy))
```

```{r, echo=FALSE, out.width = '70%'}
knitr::include_graphics(here::here("img", "github_commit_10.png"))
```

## Now it is your turn!<br>Commit modified file {data-background=#008080}

<div style="text-align:left"> 
+ Stage modified file  
+ Revise changes 
</div>

```{r, echo=FALSE, out.width = '70%'}
knitr::include_graphics(here::here("img", "github_commit_11.png"))
```

<div style="text-align:left"> 
+ Commit &  Push 
</div>

# Basic vocabulary: conflicts {data-background=#4B0082}

## Conflicts

```{r, echo=FALSE, out.width = '40%'}
knitr::include_graphics("https://imgs.xkcd.com/comics/git.png")
```

<small>Source: *https://imgs.xkcd.com/comics/git.png*</small>


## Resolving conflicts

Conflict appears when different changes have been made to the same file since the last commit.  

```{r, echo=FALSE, out.width = '70%'}
knitr::include_graphics(here::here("img", "git_conflict.png"))
```

Conflicts have to be resolved.

# Now it is your turn!<br>Create and resolve a conflict {data-background=#008080}

## Now it is your turn!<br>Create and resolve a conflict {data-background=#008080}

Open README file directly from your github remote repository:

```{r, echo=FALSE, out.width = '50%'}
knitr::include_graphics(here::here("img", "git_conflict_02.png"))
```

Edit the file, and commit changes:

```{r, echo=FALSE, out.width = '50%'}
knitr::include_graphics(here::here("img", "git_conflict_03.png"))
```

## Now it is your turn!<br>Create and resolve a conflict {data-background=#008080}

<div style="text-align:left"> 

+ **WITHOUT pulling** changes, open README.md file in RStudio  
and modify the file (as you wish, but differently than you have done via web).  

+ Save the file, stage it and add to the commit. 

+ Commit changes and **Push** them to the remote repository

</div>

## Now it is your turn!<br>Create and resolve a conflict {data-background=#008080}

<div style="text-align:left"> 
**Congratulations!** You have provoked your first git conflict.
</div>

```{r, echo=FALSE, out.width = '50%'}
knitr::include_graphics(here::here("img", "git_conflict_04.png"))
```

<div style="text-align:left"> 
**Bad news:** you need to somehow resolve it.
</div>

## Now it is your turn!<br>Create and resolve a conflict {data-background=#008080}

<div style="text-align:left"> 

+ **Pull** remote file to your local repository.
</div>

```{r, echo=FALSE, out.width = '50%'}
knitr::include_graphics(here::here("img", "git_conflict_05.png"))
```

<div style="text-align:left"> 
+ Open the file and make final changes to the *problematic* lines  
(i.e. those between `<<<<<<<` and `>>>>>>>` followed by the commit id)
+ remove conflict markers (<span style="color:#FFA07A; background-color:rgba(255,244,204,.2)">`<<<<<<<`, `=======`, `>>>>>>>`</span>)
+ Commit and push your changes.  
</div>
**Resolved!**


# Basic vocabulary: branches {data-background=#4B0082}

## Branch 

<span style="color:#FFA07A">Branch</span> is a parallel version of a repository.  

```{r, echo=FALSE, out.width = '30%'}
knitr::include_graphics(here::here("img", "git_branch_01.png"))
```

<div style="text-align:left"> 
The **main** branch of the repository is a <span style="color:#FFA07A">**`master`**</span> branch. 

By creating a new branch you duplicate a current state of the repository (all files, commits etc.). 
</div>

```{r, echo=FALSE, out.width = '50%'}
knitr::include_graphics("https://docs.github.com/assets/images/help/branches/pr-retargeting-diagram1.png")
```

<small>Source: *https://docs.github.com/assets/images/help/branches/pr-retargeting-diagram1.png*</small>

## Why to use branches? 

<div style="text-align:left"> 
+ <span style="color:#FFA07A">Branch</span> permits you to work with your project without affecting the main stream.  
+ You can experiment with your code without any *harm* on previous version.
You can easily discard changes if they don't work for you.  
+ You can take several different approaches and experiment which of them works the best.  
+ You can easy switch between branches, compare them against each other, revised proposed changes, etc.  
+ Many contributors may work with code in paralell.
+ Each branch can have multiple commits.
+ You can have multiple branches and you can create a branch from any previous branch.

</div>
```{r, echo=FALSE, out.width = '30%'}
knitr::include_graphics(here::here("img", "git_branch_03.png"))
```

# Create new branch {data-background=#4B0082}

## New branch via GitHub.com

You can create new branch via GitHub.com web:

```{r, echo=FALSE, out.width = '30%'}
knitr::include_graphics(here::here("img", "git_branch_03.png"))
```

Name convention for branches is similar to repo one (e.g. `this-is-my-new-branch`)


```{r, echo=FALSE, out.width = '30%'}
knitr::include_graphics(here::here("img", "git_branch_04.png"))
```

```{r, echo=FALSE, out.width = '30%'}
knitr::include_graphics(here::here("img", "git_branch_05.png"))
```


## New branch from GitHub.com to RStudio

Once you create a new branch, it appears in your local repo once you **pull** the remote one.

```{r, echo=FALSE, out.width = '30%'}
knitr::include_graphics(here::here("img", "git_branch_06.png"))
```

```{r, echo=FALSE, out.width = '30%'}
knitr::include_graphics(here::here("img", "git_branch_07.png"))
```

Now, you can <span style="color:#FFA07A">check out</span> to this new branch.  
Any further commit will be added to this new branch, while `master` will be untouched.

## New branch from RStudio

You can create a new branch directly from RStudio:

```{r, echo=FALSE, out.width = '25%'}
knitr::include_graphics(here::here("img", "git_branch_07.png"))
```
```{r, echo=FALSE, out.width = '50%'}
knitr::include_graphics(here::here("img", "git_branch_09.png"))
```
<div style="text-align:left"> 
Select a name for the new branch.  
**Tip:** Add remote, preferably using the same name as in your local repository.
The new branch appears also in your remote repository: 
</div>  
```{r, echo=FALSE, out.width = '20%'}
knitr::include_graphics(here::here("img", "git_branch_08.png"))
```



# Now it is your turn!<br>Create a new branch and add a new commit {data-background=#008080}

## Now it is your turn!<br>Create a new branch and add a new commit {data-background=#008080}

<div style="text-align:left"> 
+ Create new branch  
+ Add some text to README.md (whatever you wish)  
+ Replace lines 17-18 in `example_code.R` with lines 31-33 from `exercice_description.R`  
+ Stage both files and commit  
</div>
```{r, echo=FALSE, out.width = '50%'}
knitr::include_graphics(here::here("img", "git_branch_10.png"))
```

<div style="text-align:left"> 
+ **Push** changes to the remote repository  
+ Inspect your remote repository on GitHub.com
</div>

# Basic vocabulary:<br>Pull request & merge {data-background=#4B0082}

## Merge

Once you are ready to incorporate the changes you can <span style="color:#FFA07A">**merge**</span> them into your master branch.

```{r, echo=FALSE, out.width = '50%'}
knitr::include_graphics(here::here("img", "git_branch_02.png"))
```

It means, that all commits from a given branch will be inlcuded into your `master` branch. 

## Compare branches

<div style="text-align:left"> 
On GitHub.com you can compare two branches.  
To do so you can either:

+ add `/compare` to your repository path  
<small>(e.g. `https://github.com/stmarcin/github-workshop/compare`) </small>  

or  
+ Click on `Compare & pull request` and scroll down. 
</div> 

```{r, echo=FALSE, out.width = '70%'}
knitr::include_graphics(here::here("img", "git_branch_11.png"))
```

## Compare branches via GitHub.com

```{r, echo=FALSE, out.width = '80%'}
knitr::include_graphics(here::here("img", "git_branch_12.png"))
```

## Pull request 

<div style="text-align:left"> 
+ <span style="color:#FFA07A">**Pull request**</span> opens a discussion on proposed changes.  

+ By filling a pull request you are asking a repo owner to pull your changes to the repository.  
Note: you can *ask* yourself (as repo owner) as well!  

+ Submitted changes are to be reviewed and either accepted or rejected by a repository's owner.
</div>

## Add a comment to the pull request

```{r, echo=FALSE, out.width = '80%'}
knitr::include_graphics(here::here("img", "git_branch_13.png"))
```

## Submit the pull request

```{r, echo=FALSE, out.width = '80%'}
knitr::include_graphics(here::here("img", "git_branch_14.png"))
```

## Delete unnecessary branch

Once you **confirm** merge you can delete an old branch.

```{r, echo=FALSE, out.width = '80%'}
knitr::include_graphics(here::here("img", "git_branch_15.png"))
```

Go back to RStudio. Check out to `master` and click **pull**

<div style="color:#FFA07A; background-color:rgba(255,244,204,.1)">
```
>>> C:/Program Files/Git/bin/git.exe pull
From https://github.com/stmarcin/test_workshop
   2387ab3..4e6e32c  master                  -> origin/master
Updating 2387ab3..4e6e32c
Fast-forward
 README.md      | 1 +
 example_code.R | 5 +++--
 2 files changed, 4 insertions(+), 2 deletions(-)
```
</div>


## Delete branch in RStudio

The branch is deleted from the remote repository but it is still visible in RStudio pop-up menu:

```{r, echo=FALSE, out.width = '20%'}
knitr::include_graphics(here::here("img", "git_branch_16.png"))
```

## Delete branch in RStudio

<div style="text-align:left"> 
In order to remove it you need:

+ go to **(S)hell**  
</div>

```{r, echo=FALSE, out.width = '60%'}
knitr::include_graphics(here::here("img", "git_rstudio_pane_06.png"))
```


<div style="text-align:left"> 
+ type the following:</div>  

<div style="color:#FFA07A; background-color:rgba(255,244,204,.1)">
```
git fetch -p
```
</div>

<div style="text-align:left"> 
+ and delete a branch
</div>  

<div style="color:#FFA07A; background-color:rgba(255,244,204,.1)">
```
git branch -d name-of-your-branch
```
</div>


# Now it is your turn!<br>Merge a branch {data-background=#008080}

+ Create a pull request  
+ Merge a pull request  
+ Comfirm merge  
+ Delete branch on GitHub.com  
+ Check out to `master`  
+ *Optional: delete your local branch (and remove it from RStudio pop-up menu)*

# Annex I {data-background=#8B008B}

# Basic vocabulary:<br>Fork repository {data-background=#4B0082}

## Fork

<div style="text-align:left"> 
<span style="color:#FFA07A">**Fork**</span> repository makes a personal `copy` of another user's repository.  

All commits you made are **pushed** to your copy of the original repository without afecting an original one.

You can establish a link to an original repo, keep your fork synchronized and make a pull request to an **upstream** repo.

</div>

```{r, echo=FALSE, out.width = '80%'}
knitr::include_graphics(here::here("img", "git_fork_01.png"))
```

## Workflow with forked repository

1. Once you fork repository you need to clone it to the local repo. 
1. Once it is cloned you have to set a link to the original one.  
1. Open Shell and write the following:

    <div style="color:#FFA07A; background-color:rgba(255,244,204,.1)">
    ```
    git remote add upstream https://github.com/stmarcin/repo-for-workshop-tgis
    ```
    </div>  

1. Create a new branch and check-out to it.
1. Add/edit files, stage them and commit changes.  
1. Push changes to **your** remote repository.  
1. Create a **Pull request**


# Basic vocabulary: issues {data-background=#4B0082}

## GitHub issues

```{r, echo=FALSE, out.width = '50%'}
knitr::include_graphics(here::here("img", "github_issues.png"))
```

GitHub <span style="color:#FFA07A">**issues**</span> serve to communicate with users (including yourself).

+ Each **`issue`** has its own id which can be then refered to and contains its own discussion thread.
+ You can refer the issue id (`#`) in your commit messages, e.g. `Solve #3`
+ You can <span style="color:#FFA07A">`@mention`</span> another user so they are informed about the issue.  

# Now it is your turn!<br>Fork a repository {data-background=#008080}

+ Fork the repository `https://github.com/stmarcin/repo-for-workshop-tgis` and clone it to your local settings.
+ Add upstream
+ Open new issue and `@mention` me!
+ Create a new branch (`new-branch-NumberOfYourFile`)
+ Edit *your* file, stage it and add to commit.
+ Push changes and open a **pull request**
+ In your pull request refer to your issue






# Annex II: new repo {data-background=#8B008B}

# Create new repo {data-background=#4B0082}

## Create repo for an existing project

Do you already have R project and need to create GitHub repo for it?  
**No problem!**

<br> 

<p align = left>The easiest way to do that (no configuration needed):</p>

1. Create a new repo on `GitHub` (remember to include `.gitignore`);  
1. Clone the repo to you desktop
1. Copy your project to the one you created when cloning your repo.
1. Commit the files of your choice (adding unnecessary to `.gitignore`)

<br> 

Done!

## Using `{usethis}` package

<div style="text-align:left"> 

1. install `{usethis}` package  

  ```
  install.packages("usethis")
  ```

2. Create local repository
  ```
  usethis::use_git()
  ```

3. Commit. Add unnecessary files to `.gitignore`.

4. Create a new repo on GitHub as a remote to your local one

  ```
  usethis::use_github()
  ```

<br>

Note 1: use use_github() help to check its parameters (`?usethis::use_github()`).  

Note 2: in case of problems, check relevant chapter of [Happy Git and GitHub for the useR](https://happygitwithr.com/existing-github-last.html)

</div> 





# Annex III: .gitignore {data-background=#8B008B}

# How to create  **.gitignore**? {data-background=#4B0082}

## On GitHub when creating repository

<br>

```{r, echo=FALSE, out.width = '70%'}
knitr::include_graphics(here::here("img", "create_gitignore_01.png"))
```

## On GitHub whenever

<br> 

```{r, echo=FALSE, out.width = '70%'}
knitr::include_graphics(here::here("img", "create_gitignore_02.png"))
```

```{r, echo=FALSE, out.width = '70%'}
knitr::include_graphics(here::here("img", "create_gitignore_03.png"))
```

## In RStudio from **`Git`** pane

<br> 

You can select which files you want to add to <span style="color:#FFA07A">**.gitignore**</span>

<br> 

```{r, echo=FALSE, out.width = '60%'}
knitr::include_graphics(here::here("img", "create_gitignore_04.png"))
```

<br> 

In the next step you can select where <span style="color:#FFA07A">**.gitignore**</span> will be located  
and add whichever files you want, even those which do not yet exist


## In R using `{usethis}` package

<br> 

<div style="text-align:left"> 

+ `use_git_ignore()` *tells* git to ignore particular file(s)

```
usethis::use_git_ignore(ignores, directory = "."
```

+ `edit_git_ignore()` opens `.gitignore` file so you can edit it manually. 

```
usethis::edit_git_ignore()
```

</div>



